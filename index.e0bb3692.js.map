{"mappings":"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","sources":["src/game.js"],"sourcesContent":["class Game {\r\n    constructor() {\r\n        this.controller = null\r\n        this.wait = this.wait.bind(this)\r\n        this.wait()\r\n    }\r\n\r\n    wait() {\r\n        if (typeof THREE === \"undefined\" && typeof io === \"undefined\") { requestAnimationFrame(this.wait) } else { this.loadingDone() }\r\n    }\r\n\r\n    loadingDone() {\r\n        this.frameCap = 1000 / 60\r\n\r\n        this.scene = new THREE.Scene()\r\n\r\n        this.cameraContainer = new THREE.Object3D()\r\n\r\n        this.camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.01, 1000000);\r\n\r\n        this.cameraContainer.add(this.camera)\r\n        this.scene.add(this.cameraContainer)\r\n\r\n        this.renderer = new THREE.WebGLRenderer({\r\n            antialias: true,\r\n            alpha: false,\r\n            powerPreference: \"high-performance\",\r\n            stencil: false,\r\n        });\r\n\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.outputColorSpace = THREE.SRGBColorSpace\r\n        this.renderer.toneMapping = THREE.NeutralToneMapping\r\n        this.renderer.toneMappingExposure = 1.0\r\n\r\n        this.controls = new PointerLockControls(this.camera, this.renderer.domElement);\r\n\r\n        window.addEventListener('resize', () => {\r\n            this.camera.aspect = window.innerWidth / window.innerHeight;\r\n            this.camera.updateProjectionMatrix();\r\n            this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        });\r\n\r\n        document.body.appendChild(this.renderer.domElement);\r\n\r\n        this.clock = new THREE.Clock()\r\n\r\n        this.stats = new Stats()\r\n        document.body.appendChild(this.stats.dom)\r\n\r\n        this.cameraContainer.position.set(4.5, 1.5, 9.5)\r\n\r\n        this.loadScene1()\r\n    }\r\n\r\n\r\n    loadScene1() {\r\n        new RGBELoader().load(\"background5.hdr\", (texture) => {\r\n            texture.colorSpace = THREE.LinearSRGBColorSpace\r\n            texture.mapping = THREE.EquirectangularReflectionMapping;\r\n            this.scene.background = texture\r\n            this.scene.backgroundIntensity = 0.7\r\n            this.scene.environment = texture\r\n            this.scene.environmentIntensity = 1\r\n            new GLTFLoader().load(\"testfiaba.glb\", (glb) => {\r\n                this.map = glb.scene\r\n                this.scene.add(this.map)\r\n                new GLTFLoader().load(\"testfiaba-ped.glb\", (glb) => {\r\n                    this.actionIdle = glb.animations[1]\r\n                    this.ped = glb.scene\r\n                    this.mixer = new THREE.AnimationMixer(this.ped)\r\n                    this.action = this.mixer.clipAction(this.actionIdle)\r\n                    this.action.play()\r\n                    this.listener = new THREE.AudioListener()\r\n                    this.listener.rotation.y = Math.PI - Math.PI / 8\r\n                    this.camera.add(this.listener)\r\n                    this.sound = new THREE.PositionalAudio(this.listener)\r\n                    new THREE.AudioLoader().load(\"audio2.mp3\", (buffer) => {\r\n                        this.sound.setBuffer(buffer)\r\n                        this.sound.setRefDistance(20)\r\n                        this.sound.setLoop(true)\r\n                        this.sound.play()\r\n                    })\r\n                    this.ped.add(this.sound)\r\n                    this.scene.add(this.ped)\r\n                    this.update()\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    update() {\r\n        setTimeout(() => {\r\n            this.update()\r\n        }, this.frameCap);\r\n        this.stats.update()\r\n        this.mixer.update(this.clock.getDelta())\r\n        this.renderer.render(this.scene, this.camera);\r\n    }\r\n}\r\n\r\nwindow.Game = Game\r\n"],"names":[],"version":3,"file":"index.e0bb3692.js.map","sourceRoot":"/__parcel_source_root/"}